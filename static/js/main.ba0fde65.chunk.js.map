{"version":3,"sources":["state/context.ts","reportWebVitals.ts","utils/styles.ts","components/NavBar/styles.ts","state/chatStore.ts","components/Clock/styles.ts","utils/time.ts","components/Clock/Clock.tsx","components/Loader/Loader.tsx","components/Chat/styles.ts","components/Message/styles.ts","utils/const.ts","utils/routes.ts","components/Message/Message.tsx","components/Emoji/styles.ts","components/Emoji/Emoji.tsx","components/Chat/Chat.tsx","components/BasicJoinForm/styles.ts","components/BasicJoinForm/BasicJoinForm.tsx","components/Login/styles.ts","components/Registration/styles.ts","components/JoinOptions/styles.ts","components/JoinOptions/JoinOptions.tsx","components/Login/Login.tsx","components/Registration/Registration.tsx","components/Weather/Weather.tsx","components/NavBar/NavBar.tsx","http/chatApiInstance.ts","service/AuthService.ts","state/meStore.ts","components/AppRoute/AppRoute.tsx","http/funFactApiInstance.ts","service/DayFactService.ts","service/WeatherService.ts","state/utilityStore.ts","components/App/App.tsx","index.tsx"],"names":["MyContext","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","title","fontFamily","fontSize","useStyles","makeStyles","display","gridAutoRows","justifyItems","minHeight","alignItems","textTransform","onlineCounter","color","React","defaultValue","MESSAGE_ENUM","timeRoot","whiteSpace","getTime","date","getTwoDig","time","string","toString","length","hour","getHours","min","getMinutes","sec","getSeconds","timeConverter","UNIX_timestamp","a","Date","year","getFullYear","month","getMonth","getDate","Clock","props","children","clocRef","useState","setTime","styles","useEffect","clearId","setTimeout","clearTimeout","ref","className","Loader","Container","Grid","container","justifyContent","style","height","window","innerHeight","CircularProgress","messagesRoot","maxHeight","messages","width","backgroundColor","overflowY","newMessageRoot","position","rowGap","sendButton","textField","mainBlock","minWidth","margin","borderRadius","maxWidth","padding","info","name","copy","cursor","opacity","top","ROUTES","ChatStore","messageValue","isLoading","isConnected","connectionCounter","makeAutoObservable","this","deep","value","count","Message","observer","isMe","message","useContext","chat","event","CONNECTION","setConnectionCounter","marginLeft","marginRight","paddingRight","direction","MESSAGE","justifySelf","borderBottom","toUpperCase","body","onClick","navigator","clipboard","writeText","right","left","emojiRoot","zIndex","picker","Emoji","frameWidth","isShowEmoji","setIsShowEmoji","classNames","onBlur","native","groupNames","smileys_people","disableAutoFocus","onEmojiClick","emojiObject","setMessageValue","emoji","skinTone","SKIN_TONE_MEDIUM_DARK","Button","Chat","me","socket","chatRef","useRef","formik","useFormik","initialValues","onSubmit","values","trim","id","now","email","send","JSON","stringify","sendMessage","messagesLength","current","scrollTo","scrollHeight","scrollToBottom","handleSubmit","map","mes","TextField","label","variant","autoComplete","onChange","e","currentTarget","clientWidth","type","classes","outlined","root","marginTop","alert","BasicJoinForm","submitButtonText","isRegistration","showAlert","onCloseAlert","password","console","log","onChatDisabler","Box","Grow","in","Alert","onClose","severity","transformOrigin","timeout","gap","autoFocus","handleChange","inputProps","form","disabled","gridTemplateColumns","columnGap","button","publicRoutes","path","JOIN_ROUTE","Component","item","to","REGISTRATION_ROUTE","LOGIN_ROUTE","login","timeOutId","setShowAlert","username","registration","onShowAlert","useCallback","Weather","CHAT_ROUTE","PROFILE_ROUTE","utility","fetchWeather","weather","NavBar","clockRef","isAuthorized","isLoginPage","useLocation","pathname","includes","isLJoinPage","emptyBoxWidth","offsetWidth","onLogout","logout","AppBar","elevation","baseURL","chatApiInstance","axios","create","interceptors","request","use","config","headers","Authorization","localStorage","getItem","response","error","originalRequest","status","_isRetry","post","withCredentials","setItem","data","accessToken","AuthService","instance","delete","MeStore","setMe","user","setAuthData","warn","refresh","AppRoute","component","exact","dayFactApiInstance","DayFactService","get","WeatherService","chatInstance","UtilityStore","fact","fetchFact","setFact","contents","setWeather","App","utilityStore","setSocket","connect","setLoading","WebSocket","onmessage","messageEvent","setMessages","parse","onopen","setConnected","onclose","onerror","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ba0fde65.chunk.js","sourcesContent":["import * as React from \"react\";\r\n\r\nlet defaultValue: any;\r\nexport let MyContext: React.Context<any>;\r\nMyContext = React.createContext (defaultValue);\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const title = {\r\n        fontFamily:'monospace',\r\n        fontSize:'2rem'\r\n}\r\n","import { makeStyles } from '@mui/styles';\r\nimport {title} from \"../../utils/styles\";\r\n\r\nexport const useStyles = makeStyles({\r\n    title: {\r\n        display:\"grid\",\r\n        // gridTemplateRows:'1fr 1fr',\r\n        gridAutoRows:'auto',\r\n        justifyItems:\"center\",\r\n        minHeight:90,\r\n        alignItems:'center',\r\n        '&>div:first-child':{\r\n            ...title,\r\n            textTransform:\"uppercase\",\r\n        }\r\n    },\r\n    onlineCounter:{\r\n        color:\"grey\"\r\n    },\r\n});","import {makeAutoObservable} from \"mobx\";\r\n\r\n\r\nexport enum MESSAGE_ENUM {\r\n    MESSAGE = 'message',\r\n    QUIT = 'quit',\r\n    CONNECTION = 'connection'\r\n}\r\n\r\n\r\nexport interface IMessage {\r\n    event: MESSAGE_ENUM;\r\n    id: string;\r\n    name: string;\r\n    body: string;\r\n    connectionCounter: number;\r\n}\r\n\r\n\r\ninterface IChat {\r\n    messages: IMessage[];\r\n    messageValue: string;\r\n    isLoading: boolean;\r\n    isConnected: boolean;\r\n    connectionCounter?: number;\r\n    setConnected: (isConnected: boolean) => void;\r\n    setLoading: (isLoading: boolean) => void;\r\n    setMessageValue: (value: string) => void;\r\n    setMessages: (messages: any) => void;\r\n}\r\n\r\nclass ChatStore implements IChat {\r\n    messages = [] as IMessage[];\r\n    messageValue = '';\r\n    isLoading = false;\r\n    isConnected = false;\r\n    connectionCounter = 0;\r\n\r\n    constructor() {\r\n        makeAutoObservable ( this, {}, {deep: true} );\r\n    }\r\n\r\n\r\n    setConnected(isConnected: boolean) {\r\n        this.isConnected = isConnected;\r\n    };\r\n\r\n    setLoading(isLoading: boolean) {\r\n        this.isLoading = isLoading;\r\n    };\r\n\r\n    setMessageValue(value: string) {\r\n        this.messageValue = value;\r\n    };\r\n\r\n    setMessages(messages: any) {\r\n        this.messages =  [...this.messages,...messages, ];\r\n\r\n    };\r\n\r\n    setConnectionCounter(count: number) {\r\n        this.connectionCounter = count;\r\n    };\r\n}\r\n\r\nexport default ChatStore;","import { makeStyles } from '@mui/styles';\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    timeRoot:{\r\n       fontSize:'2rem',\r\n        fontFamily:\"monospace\",\r\n        color:'gray',\r\n        whiteSpace:'nowrap'\r\n    },\r\n});","\r\n\r\n\r\nexport const getTime = (date:Date) => {\r\n    const getTwoDig = (time:number) => {\r\n        const string = time.toString()\r\n        return string.length > 1 ? string : `0${string}`\r\n    }\r\n    const hour = getTwoDig(date.getHours())\r\n    const min = getTwoDig(date.getMinutes())\r\n    const sec = getTwoDig(date.getSeconds())\r\n    return `${ hour }: ${min }: ${ sec }`\r\n}\r\n\r\nconst timeFromUnix = (date:number) => {\r\n    return new Date(date * 1000)\r\n}\r\n\r\nexport const getDate = (date:number) => {\r\n    const fullDate = timeFromUnix(date)\r\n    const year = fullDate.getFullYear()\r\n    const month = fullDate.getMonth()\r\n    const day = fullDate.getDay()\r\n    return `${ year }: ${month }: ${ day }`\r\n}\r\nexport const timeConverter = (UNIX_timestamp:number) => {\r\n    // weird\r\n    const a = new Date(UNIX_timestamp / 1000);\r\n    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    const year = a.getFullYear();\r\n    const month = months[a.getMonth()];\r\n    const date = a.getDate();\r\n    const hour = a.getHours();\r\n    const min = a.getMinutes();\r\n    const sec = a.getSeconds();\r\n    const time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;\r\n    return time;\r\n}","import * as React from 'react';\r\nimport {LegacyRef, useEffect, useRef, useState} from 'react';\r\nimport {useStyles} from './styles'\r\nimport {getTime} from \"../../utils/time\";\r\n\r\n\r\ninterface IProps {\r\n clocRef?:React.Ref<HTMLDivElement> | null\r\n}\r\n\r\nexport const Clock: React.FC<IProps> = (props) => {\r\n    const {children,clocRef} = props;\r\n    const [time, setTime] = useState ( new Date () );\r\n    const styles = useStyles();\r\n\r\n\r\n    useEffect ( () => {\r\n        const clearId = setTimeout ( () => setTime ( new Date () ), 1000 );\r\n        return () => clearTimeout ( clearId );\r\n    }, [time] );\r\n\r\n    return (\r\n        <div ref={clocRef} className={styles.timeRoot}>\r\n            { getTime(time)}\r\n        </div>\r\n    );\r\n};","// @flow\r\nimport {CircularProgress, Container, Grid} from '@mui/material';\r\nimport * as React from 'react';\r\n\r\n\r\ntype Props = {\r\n\r\n};\r\nexport const Loader = (props: Props) => {\r\n    return (\r\n        <Container>\r\n            <Grid container alignItems={\"center\"} justifyContent={\"center\"} style={{height: window.innerHeight-30}}>\r\n                    <CircularProgress color=\"primary\" />\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};","import {makeStyles} from \"@mui/styles\";\r\n\r\nexport const useStyles = makeStyles({\r\n    messagesRoot: {\r\n        maxHeight: window.innerHeight - 30\r\n    },\r\n    messages: {\r\n        width: '100%',\r\n        height: '70vh',\r\n        backgroundColor: '#354765',\r\n        overflowY: 'auto'\r\n    },\r\n    newMessageRoot: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        rowGap: 20,\r\n        color: '#ffffff'\r\n    },\r\n    sendButton:{\r\n        backgroundColor: '#354765',\r\n        color: '#ffffff',\r\n        width:'20%',\r\n        height:56,\r\n        '&:hover':{\r\n            backgroundColor: '#7094d2',\r\n            color: '#354765',\r\n        }\r\n    },\r\n    textField:{\r\n        width:'80%'\r\n    }\r\n})","import { makeStyles } from '@mui/styles';\r\nimport {MOBIL} from \"../../utils/const\";\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    mainBlock:{\r\n        minWidth: '40vw',\r\n        margin: 10,\r\n        borderRadius: '4%',\r\n        maxWidth: '60%',\r\n        width: 'fit-content',\r\n        padding: 15,\r\n        display: 'grid',\r\n        justifyContent:'flexStart',\r\n        rowGap: 20,\r\n        fontFamily: 'serif',\r\n        position:'relative'\r\n    },\r\n    info: {\r\n        color:'#afbed2',\r\n        margin:'20px 30px'\r\n    },\r\n    name:{\r\n        display:'block',\r\n        maxWidth:'max-content'\r\n    },\r\n    copy:{\r\n        cursor:\"pointer\",\r\n        position:\"absolute\",\r\n        opacity:0.7,\r\n        top:8\r\n\r\n    },\r\n    date:{\r\n        fontSize:'0.7em'\r\n    },\r\n    [`@media (max-width:${MOBIL}px)`]: {\r\n        mainBlock:{\r\n            minWidth: '70vw',\r\n            fontSize: '1.4em'\r\n        },\r\n    }\r\n});","export const MOBIL = 520;","import {Chat} from \"../components/Chat/Chat\";\r\nimport {Login} from \"../components/Login/Login\";\r\nimport {Registration} from \"../components/Registration/Registration\";\r\nimport {JoinOptions} from \"../components/JoinOptions/JoinOptions\";\r\nimport {Profile} from \"../components/Profile/Profile\";\r\n\r\n\r\nexport enum ROUTES {\r\n    LOGIN_ROUTE = '/login',\r\n    CHAT_ROUTE = '/chat',\r\n    REGISTRATION_ROUTE = '/registration',\r\n    JOIN_ROUTE = '/join',\r\n    PROFILE_ROUTE = '/profile',\r\n}\r\n\r\nexport const publicRoutes = [\r\n\r\n    {\r\n        path: ROUTES.JOIN_ROUTE,\r\n        Component: JoinOptions,\r\n    },\r\n    {\r\n        path: ROUTES.LOGIN_ROUTE,\r\n        Component: Login,\r\n    },\r\n    {\r\n        path: ROUTES.REGISTRATION_ROUTE,\r\n        Component: Registration,\r\n    },\r\n];\r\n\r\nexport const privateRoutes = [\r\n    {\r\n        path: ROUTES.CHAT_ROUTE,\r\n        Component: Chat,\r\n    },\r\n    {\r\n        path: ROUTES.PROFILE_ROUTE,\r\n        Component: Profile,\r\n    },\r\n];\r\n\r\n","import * as React from 'react';\r\nimport {useContext} from 'react';\r\nimport {Grid} from \"@mui/material\";\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport {useStyles} from \"./styles\";\r\nimport {MESSAGE_ENUM} from \"../../state/chatStore\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {timeConverter} from \"../../utils/time\";\r\nimport {MyContext} from \"../../state/context\";\r\n\r\n\r\ntype Props = {\r\n    isMe: boolean;\r\n    message: any;\r\n};\r\nexport const Message: React.FC<Props> = observer((props) => {\r\n    const {isMe, message} = props;\r\n    const [chat,me, socket] = useContext ( MyContext );\r\n    const styles = useStyles ();\r\n    const onCopy = () =>  navigator.clipboard.writeText(message.body)\r\n    if (message.event === MESSAGE_ENUM.CONNECTION) {\r\n        chat.setConnectionCounter(message.connectionCounter);\r\n    }\r\n    const style = {\r\n        backgroundColor: isMe ? '#3a64a8' : '#536f9b',\r\n        color:  isMe ? '#f6dbaa' :'#eee4cc',\r\n        marginLeft: isMe ? 'auto' : '10%',\r\n        marginRight: isMe ? '10%' : 0,\r\n        paddingRight:10\r\n\r\n    };\r\n\r\n    return (\r\n        <Grid direction={ \"column\" } container>\r\n            { message.event === MESSAGE_ENUM.MESSAGE\r\n                ? <div className={styles.mainBlock} style={ style }>\r\n                    <h3 className={styles.name}\r\n                        style={\r\n                            {justifySelf:`${!isMe && 'flex-end'}`,borderBottom:`2px solid ${isMe ? '#f6dbaa' :'#eee4cc' }`}\r\n                        }>\r\n                        { message.name?.toUpperCase() }\r\n                    </h3>\r\n                    <span>{ message.body }</span>\r\n                    <span className={styles.date}>{ timeConverter(message.date * 1000)  }</span>\r\n                    <div onClick={onCopy} style={isMe ? {right:2} : {left:6}\r\n                    } title={'скопировать сообщение'} className={styles.copy}>\r\n                        <ContentCopyIcon/>\r\n                    </div>\r\n            </div>\r\n                : message.event === MESSAGE_ENUM.CONNECTION ?\r\n                    <span className={ styles.info }>{ message.name } подключился к чату.. .</span>\r\n                    : <span className={ styles.info }>{ message.name } вышел из чата.. .</span> }\r\n        </Grid>\r\n    );\r\n});","import {makeStyles} from \"@mui/styles\";\r\n\r\nexport const useStyles = makeStyles({\r\n    emojiRoot: {\r\n        position: \"absolute\",\r\n        zIndex: 1,\r\n        top: 10,\r\n\r\n    },\r\n\r\n    picker:{\r\n        top:-350\r\n    },\r\n\r\n})","import * as React from 'react';\r\nimport {useContext, useState} from 'react';\r\nimport classNames from \"classnames\";\r\nimport Picker, {SKIN_TONE_MEDIUM_DARK} from \"emoji-picker-react\";\r\nimport {Button} from \"@mui/material\";\r\nimport EmojiEmotionsIcon from \"@mui/icons-material/EmojiEmotions\";\r\nimport {useStyles} from \"./styles\";\r\nimport {MyContext} from \"../../state/context\";\r\nimport {observer} from \"mobx-react-lite\";\r\n\r\n\r\n\r\ninterface IProps  {\r\n    frameWidth?:number\r\n}\r\n\r\nexport const Emoji: React.FC<IProps> = observer((props) => {\r\n    const {children,frameWidth = 0} = props;\r\n    const [chat,me,socket] = useContext ( MyContext );\r\n    const styles = useStyles ();\r\n    const [isShowEmoji, setIsShowEmoji] = useState ( false );\r\n    const showImoji = () => setIsShowEmoji ( true );\r\n    const hideImoji = () => setIsShowEmoji ( false );\r\n    const onEmojiClick = (event: any, emojiObject: any) => {\r\n        chat.setMessageValue ( emojiObject.emoji ) ;\r\n    };\r\n    return (\r\n        <div style={{right:`${frameWidth * 0.2}px`}} className={ classNames ( styles.emojiRoot, {[styles.picker]: isShowEmoji} ) }\r\n             onBlur={ hideImoji }>\r\n            { isShowEmoji\r\n                ? <Picker native groupNames={ {smileys_people: \"PEOPLE\"} } disableAutoFocus={ true }\r\n                          onEmojiClick={ onEmojiClick } skinTone={ SKIN_TONE_MEDIUM_DARK }/>\r\n                : <Button onClick={ showImoji }><EmojiEmotionsIcon/></Button> }\r\n        </div>\r\n    );\r\n});","import * as React from 'react';\r\nimport {useContext, useEffect, useRef, useState} from 'react';\r\nimport {Button, Container, Grid, TextField} from '@mui/material';\r\nimport {Loader} from \"../Loader/Loader\";\r\nimport {useStyles} from \"./styles\";\r\nimport {Message} from \"../Message/Message\";\r\nimport {Emoji} from \"../Emoji/Emoji\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {IMessage} from '../../state/chatStore';\r\nimport {MyContext} from \"../../state/context\";\r\nimport {useFormik} from 'formik';\r\nimport MeStore from \"../../state/meStore\";\r\n\r\n\r\ntype Props = {}\r\n\r\n\r\nexport const Chat: React.FC<Props> = observer ( ((props) => {\r\n    const [chat,me, socket] = useContext ( MyContext );\r\n    const chatRef = useRef<HTMLDivElement> ( null );\r\n    const styles = useStyles ();\r\n    const sendMessage = () => {\r\n        if (!chat.messageValue.trim ()) return;\r\n        const message = {\r\n            event: 'message',\r\n            id: Date.now ().toString (),\r\n            name: me.me.email,\r\n            body: chat.messageValue,\r\n        };\r\n        socket?.send ( JSON.stringify ( message ) );\r\n        chat.setMessageValue ( '' );\r\n    };\r\n\r\n    const formik = useFormik ( {\r\n        initialValues: {\r\n            message: 'введите сообщение',\r\n        },\r\n        onSubmit: (values) => sendMessage (),\r\n    } );\r\n\r\n    const messagesArray = chat.messages;\r\n    const messagesLength = messagesArray.length;\r\n\r\n    const scrollToBottom = () => {\r\n        chatRef.current?.scrollTo ( 0, chatRef.current.scrollHeight );\r\n    };\r\n\r\n    useEffect ( () => {\r\n        scrollToBottom ();\r\n    } );\r\n\r\n    if (chat.isLoading) return <Loader/>;\r\n    return (\r\n        <Container>\r\n            <form onSubmit={ formik.handleSubmit }>\r\n                <Grid container className={ styles.messagesRoot } alignItems={ \"center\" }>\r\n                    <Grid ref={ chatRef } className={ styles.messages }>\r\n                        { messagesLength && chat.messages.map ( (mes: IMessage) => {\r\n                            const isMe = me.me.email === mes.name;\r\n                            return <Message key={ mes.id } isMe={ isMe } message={ mes }/>;\r\n                        } ) }\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid className={ styles.newMessageRoot } container direction={ 'row' } alignItems={ 'flex-end' }>\r\n                    <TextField id={ 'message' } name={ 'message' } label={ 'message' } variant=\"filled\"\r\n                               autoComplete={ 'off' } onChange={ e => chat.setMessageValue ( e.currentTarget.value ) }\r\n                               value={ chat.messageValue } className={ styles.textField }\r\n                    />\r\n                    <Emoji frameWidth={ chatRef.current?.clientWidth }/>\r\n                    <Button type={ 'submit' } variant={ 'outlined' }\r\n                            classes={ {outlined: styles.sendButton} }><strong>send</strong></Button>\r\n\r\n                </Grid>\r\n            </form>\r\n        </Container>\r\n    );\r\n}) );","import {makeStyles} from \"@mui/styles\";\r\n\r\n\r\nexport const useStyles = makeStyles ( {\r\n    root: {\r\n        marginTop: '5%',\r\n        position: 'relative',\r\n\r\n    },\r\n    alert: {\r\n        position: \"absolute\",\r\n        width: 300,\r\n        right:'25%',\r\n        opacity:0.7,\r\n        zIndex: 0,\r\n        top:'5%',\r\n\r\n    },\r\n} );","import {Alert, Box, Button, Grid, Grow, TextField} from '@mui/material';\r\nimport * as React from 'react';\r\nimport {useContext, useState} from 'react';\r\nimport {useFormik} from \"formik\";\r\nimport {MyContext} from \"../../state/context\";\r\nimport {useStyles} from \"./styles\";\r\nimport classNames from \"classnames\";\r\n\r\n\r\nexport const BasicJoinForm: React.FC<IProps> = (props) => {\r\n    const {onSubmit, children, submitButtonText, isRegistration = false,showAlert = false,onCloseAlert} = props;\r\n    const [chat, me, socket] = useContext ( MyContext );\r\n    const styles = useStyles ();\r\n    const formik = useFormik ( {\r\n        initialValues: {\r\n            name: '',\r\n            password: '',\r\n        },\r\n        onSubmit: (values) => {\r\n            try {\r\n                onSubmit && onSubmit ( values.name, values.password );\r\n            } catch (e) {\r\n                console.log ( e );\r\n            }\r\n\r\n        },\r\n    } );\r\n\r\n    const onChatDisabler = (formik.values?.name === '')\r\n        || formik.values.name.trim ().length < 3\r\n        || (formik.values?.password === '')\r\n        || formik.values.password.trim ().length < 3;\r\n\r\n    return (\r\n        <form className={ styles.root }  onSubmit={ formik.handleSubmit }>\r\n            <Box className={styles.alert} >\r\n                <Grow in={showAlert}>{<Alert onClose={onCloseAlert} severity=\"info\">{ isRegistration\r\n                    ? 'Введите имя которое будет использовано для регистрации и отправки сообщений в чате'\r\n                    : 'Введите имя указанное в процессе регистрации' }</Alert>}</Grow>\r\n                {/* Conditionally applies the timeout prop to change the entry speed. */}\r\n                <Grow\r\n                    in={showAlert}\r\n                    style={{ transformOrigin: '0 0 0' }}\r\n                    {...(showAlert ? { timeout: 1000 } : {})}\r\n                >\r\n                    { <Alert severity=\"info\">{ isRegistration\r\n                        ? 'Введите пароль который будет использован для регистрации'\r\n                        : 'Введите пароль указанный в процессе регистрации' }</Alert>}\r\n                </Grow>\r\n            </Box>\r\n            <Grid  container justifyContent={ \"center\" } alignItems={ \"center\" }\r\n                  direction={ 'column' } gap={ 1 }>\r\n                { children }\r\n                    <TextField autoFocus variant=\"filled\"\r\n                               onChange={ formik.handleChange }\r\n                               value={ formik.values.name }\r\n                               id=\"name\" name=\"name\" label=\"name\"\r\n                />\r\n\r\n                    <TextField inputProps={{\r\n                        autoComplete: 'new-password',\r\n                        form: {\r\n                            autoComplete: 'off',\r\n                        },\r\n                    }} variant=\"filled\"\r\n                               onChange={ formik.handleChange }\r\n                               value={ formik.values.password } type=\"password\"\r\n                               id=\"password\" name=\"password\" label=\"password\"\r\n                />\r\n\r\n                <Button type=\"submit\" disabled={ onChatDisabler } color={ 'info' }\r\n                        variant={ 'contained' }>{ submitButtonText }</Button>\r\n            </Grid>\r\n        </form>\r\n    );\r\n};\r\n\r\ninterface IProps {\r\n    onSubmit?: (name: string, password: string) => void;\r\n    onCloseAlert?: () => void;\r\n    submitButtonText: string;\r\n    isRegistration?: boolean;\r\n    showAlert?: boolean;\r\n};\r\n","import {makeStyles} from '@mui/styles';\r\nimport {title} from \"../../utils/styles\";\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    title:{\r\n        ...title,\r\n        textTransform:\"uppercase\",\r\n    }\r\n\r\n});","import {makeStyles} from '@mui/styles';\r\nimport {title} from \"../../utils/styles\";\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    children:{\r\n       display:\"grid\",\r\n        gridTemplateColumns:'1fr 24px',\r\n        columnGap:6,\r\n        cursor:\"pointer\"\r\n    },\r\n    title:{\r\n        ...title,\r\n        textTransform:\"uppercase\",\r\n    }\r\n\r\n});","import {makeStyles} from \"@mui/styles\";\r\n\r\nexport const useStyles = makeStyles({\r\n   root: {\r\n      marginTop:'10%',\r\n    },\r\n    button:{\r\n       backgroundColor: '#354765',\r\n    }\r\n\r\n})","import {Button, Grid} from \"@mui/material\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {ROUTES} from \"../../utils/routes\";\r\nimport * as React from \"react\";\r\nimport {useStyles} from \"./styles\";\r\nimport {FanFact} from \"../FunFact/FanFact\";\r\n\r\nexport const JoinOptions:React.FC = () => {\r\n    const styles = useStyles ();\r\n    return (\r\n        <Grid className={styles.root} container justifyContent={\"center\"} direction={\"column\"} alignItems={\"center\"} gap={10}>\r\n            {/*<FanFact text={'test'}/>*/}\r\n            <Grid item><NavLink to={ ROUTES.REGISTRATION_ROUTE }>< Button\r\n                variant={ 'contained' }>Регистрация</Button></NavLink></Grid>\r\n            <Grid item><NavLink to={ ROUTES.LOGIN_ROUTE }>< Button\r\n                variant={ 'contained' }>Вход</Button></NavLink></Grid>\r\n        </Grid>\r\n    )\r\n}","import * as React from 'react';\r\nimport {useContext} from 'react';\r\nimport {MyContext} from \"../../state/context\";\r\nimport {BasicJoinForm} from \"../BasicJoinForm/BasicJoinForm\";\r\nimport {useStyles} from './styles'\r\n\r\n\r\nexport const Login: React.FC = () => {\r\n    const styles = useStyles()\r\n    const [chat, me, socket] = useContext ( MyContext );\r\n\r\n    const onSubmit = (email:string,password:string)=>{\r\n       me.login(email,password)\r\n    }\r\n\r\n    return (\r\n        <BasicJoinForm onSubmit={onSubmit} submitButtonText={\"Войти\"}>\r\n            <div className={styles.title}> Вход </div>\r\n        </BasicJoinForm>\r\n    );\r\n};\r\n\r\n","import * as React from 'react';\r\nimport {useCallback, useContext, useState} from 'react';\r\nimport {BasicJoinForm} from \"../BasicJoinForm/BasicJoinForm\";\r\nimport HelpIcon from \"@mui/icons-material/Help\";\r\nimport {useStyles} from \"./styles\";\r\nimport {MyContext} from \"../../state/context\";\r\n\r\n\r\nexport const Registration: React.FC<Props> = () => {\r\n    const styles = useStyles ();\r\n    const [showAlert, setShowAlert] = useState ( false );\r\n    const [chat, me, socket] = useContext ( MyContext );\r\n    let timeOutId: NodeJS.Timeout;\r\n    const onSubmit = async (username: string, password: string) => {\r\n        await me.registration ( username, password );\r\n    };\r\n\r\n    const onShowAlert = useCallback ( () => {\r\n        setShowAlert ( true );\r\n        timeOutId = setTimeout ( () => {\r\n            setShowAlert ( false );\r\n        }, 5000 );\r\n    }, [] );\r\n    const onCloseAlert = useCallback ( () => {\r\n        setShowAlert ( false );\r\n        clearTimeout ( timeOutId );\r\n    }, [] );\r\n\r\n    return (\r\n        <BasicJoinForm onCloseAlert={ onCloseAlert } showAlert={ showAlert } isRegistration onSubmit={ onSubmit }\r\n                       submitButtonText={ \"Зарегистрироваться\" }>\r\n            <div className={ styles.children } onClick={ showAlert ? onCloseAlert : onShowAlert }>\r\n                <div className={ styles.title }> Регистрация</div>\r\n                <HelpIcon/></div>\r\n        </BasicJoinForm>\r\n    );\r\n};\r\ntype Props = {};\r\n","import * as React from 'react';\r\nimport {useContext, useEffect} from \"react\";\r\nimport {MyContext} from \"../../state/context\";\r\n\r\n\r\ninterface IProps {\r\n\r\n}\r\n\r\n\r\n\r\nexport const Weather: React.FC<IProps> = (props) => {\r\n    const {children} = props;\r\n    const [chat, me, socket,utility] = useContext ( MyContext );\r\n    useEffect(()=>{\r\n        utility.fetchWeather();\r\n    },[])\r\n    console.log (utility.weather);\r\n    return (\r\n        <div>\r\n\r\n        </div>\r\n    );\r\n};","import * as React from 'react';\r\nimport {useCallback, useContext, useRef} from 'react';\r\nimport {AppBar, Button, Grid} from '@mui/material';\r\nimport {useStyles} from \"./styles\";\r\nimport {MyContext} from \"../../state/context\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {Clock} from \"../Clock/Clock\";\r\nimport {NavLink, useLocation} from 'react-router-dom';\r\nimport {ROUTES} from \"../../utils/routes\";\r\nimport {Weather} from \"../Weather/Weather\";\r\n\r\n\r\ntype Props = {};\r\nexport const NavBar: React.FC<Props> = observer ( (props) => {\r\n    const [chat, me, socket] = useContext ( MyContext );\r\n    const {connectionCounter} = chat;\r\n    const styles = useStyles ();\r\n    const clockRef = useRef<HTMLDivElement> ( null );\r\n    const isAuthorized = !!me.me.email;\r\n    const isLoginPage = useLocation ().pathname.includes ( ROUTES.LOGIN_ROUTE );\r\n    const isLJoinPage = useLocation ().pathname.includes ( ROUTES.JOIN_ROUTE );\r\n    const emptyBoxWidth = clockRef?.current?.offsetWidth || 0;\r\n    const onLogout = useCallback ( () => me.logout (), [] );\r\n    return (\r\n        <AppBar color={ \"transparent\" } variant={ \"outlined\" } elevation={ 0 } position=\"static\">\r\n            <Grid container item alignItems={ \"center\" } justifyContent={ 'space-evenly' }>\r\n                <div style={ {width: emptyBoxWidth || '11vw'} }>\r\n                    <Weather/>\r\n                </div>\r\n                <div className={ styles.title }>\r\n                    <div>{ 'Чат имени Альфредо Гарсии' }</div>\r\n                    { isAuthorized ?\r\n                        <span className={ styles.onlineCounter }>\r\n                                сейчас онлайн: { connectionCounter || 0 } человек\r\n                            </span>\r\n                        : !isLJoinPage && (isLoginPage\r\n                            ? <Grid item><NavLink to={ ROUTES.REGISTRATION_ROUTE }>< Button\r\n                                variant={ 'text' }>к регистрации</Button></NavLink></Grid>\r\n                            : <Grid item><NavLink to={ ROUTES.LOGIN_ROUTE }>< Button\r\n                                variant={ 'text' }>к логину</Button></NavLink>\r\n                            </Grid>\r\n                    ) }\r\n\r\n                </div>\r\n                <Clock clocRef={ clockRef }/>\r\n                { isAuthorized && <Button onClick={ onLogout } variant={ 'outlined' }>Logout</Button> }\r\n            </Grid>\r\n        </AppBar>\r\n    );\r\n} );","import axios from \"axios\";\r\nimport {IUser} from \"../service/AuthService\";\r\n\r\n\r\n// const baseURL = 'http://localhost:5000';\r\nconst baseURL = 'https://ws-simple-chat-api.herokuapp.com/';\r\n\r\nconst chatApiInstance = axios.create({baseURL});\r\n\r\nchatApiInstance.interceptors.request.use((config)=>{\r\n    if ( config && config.headers) {\r\n        config.headers.Authorization = `Bearer ${ localStorage.getItem ( 'token' ) }`;\r\n        return config\r\n    }\r\n});\r\n\r\nchatApiInstance.interceptors.response.use((config)=>{\r\n    return config;\r\n},async (error) => {\r\n    const originalRequest = error.config;\r\n    if (error.response.status === 401 && error.config && !error.config._isRetry) {\r\n        originalRequest._isRetry = true;\r\n        try {\r\n            const response = await axios.post<AuthResponse>(`${baseURL}/auth/refresh`, {withCredentials: true})\r\n            localStorage.setItem('token', response.data.accessToken);\r\n            return chatApiInstance.request(originalRequest);\r\n        } catch (e) {\r\n            console.log('НЕ АВТОРИЗОВАН')\r\n        }\r\n    }\r\n    throw error;\r\n});\r\n\r\n\r\nexport default chatApiInstance;\r\n\r\nexport interface AuthResponse {\r\n    accessToken: string;\r\n    refreshToken: string;\r\n    user: IUser;\r\n}","import {AxiosResponse} from \"axios\";\r\nimport instance from \"../http/chatApiInstance\";\r\n\r\n\r\nexport default class AuthService {\r\n    static async login(email: string, password: string): Promise<AxiosResponse<IAuthResponse>> {\r\n        return instance.post ( 'auth/login', {email, password} );\r\n    }\r\n\r\n    static async registration(email: string, password: string): Promise<AxiosResponse<IAuthResponse>> {\r\n        return instance.post ( 'auth/registration', {email, password} );\r\n    }\r\n\r\n    static async logout(): Promise<void> {\r\n        return instance.delete ( 'auth/logout' );\r\n    }\r\n    static async refresh(): Promise<AxiosResponse<IAuthResponse>> {\r\n        return instance.post ( 'auth/refresh' );\r\n    }\r\n}\r\n\r\nexport interface IAuthResponse {\r\n    accessToken: string;\r\n    refreshToken: string;\r\n    user: IUser;\r\n}\r\n\r\nexport interface IUser {\r\n    email: string;\r\n    id: string;\r\n    isActivated: boolean;\r\n\r\n}","import {makeAutoObservable} from \"mobx\";\r\nimport AuthService, {IAuthResponse, IUser} from \"../service/AuthService\";\r\nimport {AxiosResponse} from \"axios\";\r\n\r\n\r\ninterface IMEStore {\r\n    me: IUser | null;\r\n}\r\n\r\nclass MeStore implements IMEStore {\r\n    me = {} as IUser;\r\n\r\n\r\n    constructor() {\r\n        makeAutoObservable ( this, {}, {deep: true} );\r\n    }\r\n\r\n    setMe(item: IUser | null) {\r\n        if (item) {\r\n            this.me = item;\r\n        } else {\r\n            this.me = {} as IUser\r\n        }\r\n    };\r\n\r\n    setAuthData(data: AxiosResponse<IAuthResponse, any>) {\r\n        localStorage.setItem ( 'token', data.data.accessToken );\r\n        this.setMe ( data.data.user );\r\n    }\r\n\r\n    async login(email: string, password: string) {\r\n        try {\r\n            const response = await AuthService.login ( email, password );\r\n            this.setAuthData ( response );\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n\r\n    async registration(email: string, password: string) {\r\n        try {\r\n            const response = await AuthService.registration ( email, password );\r\n            this.setAuthData ( response );\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n\r\n    async refresh() {\r\n        try {\r\n            const response = await AuthService.refresh ();\r\n            localStorage.setItem ( 'token', response.data.accessToken );\r\n            this.setMe ( response.data.user );\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n    async logout() {\r\n        try {\r\n            const response = await AuthService.logout();\r\n            this.setMe ( null );\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n\r\n}\r\n\r\nexport default MeStore;","import {Redirect, Route, Switch} from 'react-router-dom';\r\nimport * as React from \"react\";\r\nimport {privateRoutes, publicRoutes, ROUTES} from \"../../utils/routes\";\r\n\r\n\r\n\r\nconst AppRoute:React.FC = () => {\r\n\r\n    const isAuthorized = false\r\n\r\n    return isAuthorized ?\r\n        <Switch>\r\n            { privateRoutes.map ( ({path, Component}) => {\r\n                return <Route key={ path } path={ path } component={ Component } exact={ true }/>\r\n            } ) }\r\n            <Redirect to={ROUTES. CHAT_ROUTE }/>\r\n        </Switch>\r\n        :\r\n        <Switch>\r\n            { publicRoutes.map ( ({path, Component}) => {\r\n                return <Route key={ path } path={ path } component={ Component } exact={ true }/>\r\n            } ) }\r\n            <Redirect to={ ROUTES.JOIN_ROUTE }/>\r\n        </Switch>\r\n}\r\n\r\n\r\nexport default AppRoute;\r\n","import axios from \"axios\";\r\n\r\n\r\nconst baseURL = 'http://api.fungenerators.com/fact/';\r\nconst dayFactApiInstance = axios.create({baseURL});\r\nexport default dayFactApiInstance;\r\n\r\n","import {AxiosResponse} from \"axios\";\r\nimport instance from \"../http/funFactApiInstance\";\r\n\r\n\r\nexport default class DayFactService {\r\n    static async fetchFact(): Promise<AxiosResponse<IDayFactResponse>> {\r\n        return instance.get ('random',)\r\n    }\r\n\r\n}\r\n\r\ninterface IDayFactResponse {\r\n    \"success\": {\r\n        total: number\r\n    },\r\n    \"contents\": {\r\n        fact: string,\r\n        id: string,\r\n        category: string,\r\n        subcategory: string\r\n    }\r\n}\r\n","import {AxiosResponse} from \"axios\";\r\nimport chatInstance from '../http/chatApiInstance'\r\n\r\n\r\nexport default class WeatherService {\r\n    static async fetchWeather(): Promise<AxiosResponse<IWeatherResponse>> {\r\n        return chatInstance.get (`/utils/weather`,{\r\n\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport interface IWeatherResponse {\r\n    \"coord\": {\r\n        \"lon\": number,\r\n        \"lat\": number\r\n    },\r\n    \"weather\": [\r\n        {\r\n            \"id\": number,\r\n            \"main\": string,\r\n            \"description\": string,\r\n            \"icon\": string\r\n        }\r\n    ],\r\n    \"base\": string,\r\n    \"main\": {\r\n        \"temp\":number,\r\n        \"pressure\": number,\r\n        \"humidity\": number,\r\n        \"temp_min\": number,\r\n        \"temp_max\":number\r\n    },\r\n    \"visibility\": number,\r\n    \"wind\": {\r\n        \"speed\": number,\r\n        \"deg\": number\r\n    },\r\n    \"clouds\": {\r\n        \"all\": number\r\n    },\r\n    \"dt\": number,\r\n    \"sys\": {\r\n        \"type\": number,\r\n        \"id\": number,\r\n        \"message\": number,\r\n        \"country\": string,\r\n        \"sunrise\": number,\r\n        \"sunset\": number\r\n    },\r\n    \"id\": number,\r\n    \"name\": string,\r\n    \"cod\": number\r\n}\r\n\r\n","import {makeAutoObservable} from \"mobx\";\r\nimport AuthService, {IAuthResponse, IUser} from \"../service/AuthService\";\r\nimport {AxiosResponse} from \"axios\";\r\nimport DayFactService from \"../service/DayFactService\";\r\nimport WeatherService, {IWeatherResponse} from \"../service/WeatherService\";\r\n\r\n\r\ninterface IUtilityStore {\r\n    fact:string\r\n    weather:IWeatherResponse\r\n}\r\n\r\nclass UtilityStore implements IUtilityStore {\r\n    fact = '';\r\n    weather = {} as IWeatherResponse;\r\n\r\n\r\n    constructor() {\r\n        makeAutoObservable ( this, {}, {deep: true} );\r\n    }\r\n\r\n    setFact(item: string) {\r\n        if (item) {\r\n            this.fact = item;\r\n        } else {\r\n            this.fact = ''\r\n        }\r\n    };\r\n    setWeather(item: IWeatherResponse) {\r\n        if (item) {\r\n            this.weather = item;\r\n        } else {\r\n            this.weather = {} as IWeatherResponse\r\n        }\r\n    };\r\n\r\n    async fetchFact() {\r\n        try {\r\n            const response = await DayFactService.fetchFact();\r\n            this.setFact ( response.data.contents.fact );\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n async fetchWeather() {\r\n        try {\r\n            const response = await WeatherService.fetchWeather();\r\n            this.setWeather(response.data) ;\r\n        } catch (e: any) {\r\n            console.warn ( e.response?.data?.message );\r\n        }\r\n    };\r\n\r\n\r\n}\r\n\r\nexport default UtilityStore;","import * as React from 'react';\r\nimport {useEffect, useState} from 'react';\r\nimport {NavBar} from \"../NavBar/NavBar\";\r\nimport './App.css';\r\nimport {Loader} from \"../Loader/Loader\";\r\nimport {HashRouter} from 'react-router-dom';\r\nimport ChatStore, {MESSAGE_ENUM} from \"../../state/chatStore\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {MyContext} from '../../state/context';\r\nimport MeStore from \"../../state/meStore\";\r\nimport {Chat} from \"../Chat/Chat\";\r\nimport AppRoute from \"../AppRoute/AppRoute\";\r\nimport utilityStore from \"../../state/utilityStore\";\r\n\r\n\r\nconst App: React.FC = observer ( (props) => {\r\n    const [chat] = useState ( () => new ChatStore () );\r\n    const [me] = useState ( () => new MeStore () );\r\n    const [utility] = useState ( () => new utilityStore () );\r\n    const [socket, setSocket] = useState<WebSocket | null> ( null );\r\n    const value = React.useMemo ( () => [chat, me, socket, utility], [chat, me, socket, utility] );\r\n\r\n\r\n    const connect = async () => {\r\n        chat.setLoading ( true );\r\n        setSocket ( await new WebSocket ( 'wss://ws-simple-chat-api.herokuapp.com' ) );\r\n        // setSocket ( await new WebSocket ( 'ws://localhost:5000' ) );\r\n    };\r\n\r\n    const isAuthorized = !!me.me.email;\r\n\r\n    useEffect ( () => {\r\n        if (localStorage.getItem ( 'token' )) {\r\n            me.refresh ();\r\n        }\r\n    }, [] );\r\n\r\n    useEffect ( () => {\r\n        if (!socket && isAuthorized) {\r\n            connect ();\r\n        }\r\n    }, [isAuthorized] );\r\n\r\n    if (socket) {\r\n        socket.onmessage = (messageEvent: MessageEvent) => {\r\n            chat.setMessages ( JSON.parse ( messageEvent.data ) );\r\n        };\r\n        socket.onopen = () => {\r\n            chat.setConnected ( true );\r\n            const message = {\r\n                event: MESSAGE_ENUM.CONNECTION,\r\n                id: me.me.id,\r\n                name: me.me.email,\r\n                body: me.me.email,\r\n            };\r\n            socket?.send ( JSON.stringify ( message ) );\r\n            chat.setLoading ( false );\r\n        };\r\n        socket.onmessage = (event: MessageEvent) => {\r\n            const messages = JSON.parse ( event.data );\r\n            chat.setMessages ( messages );\r\n        };\r\n        socket.onclose = () => {\r\n            chat.setConnected ( false );\r\n            const message = {\r\n                event: MESSAGE_ENUM.CONNECTION,\r\n                id: me.me.id,\r\n                name: me.me.email,\r\n                body: '',\r\n            };\r\n            socket.send ( JSON.stringify ( message ) );\r\n        };\r\n        socket.onerror = () => {\r\n            chat.setConnected ( false );\r\n            setTimeout ( () => connect (), 1000 );\r\n        };\r\n    }\r\n    if (chat.isLoading) return <Loader/>;\r\n\r\n\r\n    return (\r\n        <HashRouter>\r\n            <MyContext.Provider value={ value }>\r\n                <NavBar/>\r\n                { isAuthorized ?\r\n                    <Chat/>\r\n                    : <AppRoute/>\r\n                }\r\n            </MyContext.Provider>\r\n        </HashRouter>\r\n    );\r\n} );\r\n\r\nexport default App;\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport App from \"./components/App/App\";\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n  <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}