(this["webpackJsonpreact-ws-chat"]=this["webpackJsonpreact-ws-chat"]||[]).push([[0],{130:function(e,t,n){},141:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),c=n(32),o=n.n(c),i=(n(130),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))}),u=n(16),l=n.n(u),d=n(29),j=n(12),b=n(219),f=n(220),m=n(213),O=n(216),p=n(209),h=Object(p.a)({root:{justifyContent:"space-between",display:"grid",columnGap:30,flexWrap:"wrap",rowGap:4,margin:"8px 0",gridTemplateColumns:"1fr 1fr 1fr",justifyItems:"center"},empty:{maxWidth:"30vw"},title:{display:"grid",gridTemplateRows:"1fr 1fr",justifyItems:"flex-end"},onlineCounter:{color:"grey"}});a=r.createContext(undefined);var g,v=n(34),x=Object(p.a)({timeRoot:{fontSize:24,fontFamily:"monospace",color:"gray",whiteSpace:"nowrap"}}),w=function(e){var t=function(e){var t=e.toString();return t.length>1?t:"0".concat(t)},n=t(e.getHours()),a=t(e.getMinutes()),r=t(e.getSeconds());return"".concat(n,": ").concat(a,": ").concat(r)},C=function(e){var t=new Date(e/1e3),n=t.getFullYear(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+a+" "+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},y=n(2),k=function(e){e.children;var t=Object(r.useState)(new Date),n=Object(j.a)(t,2),a=n[0],s=n[1],c=x();return Object(r.useEffect)((function(){var e=setTimeout((function(){return s(new Date)}),5e3);return function(){return clearInterval(e)}}),[a]),Object(y.jsx)("div",{className:c.timeRoot,children:w(a)})},N=n(17),T=n(37),S=n(214),I=n(208),R=n(215),E=function(e){return Object(y.jsx)(S.a,{children:Object(y.jsx)(m.a,{container:!0,alignItems:"center",justifyContent:"center",style:{height:window.innerHeight-30},children:Object(y.jsx)(R.a,{color:"primary"})})})},M=Object(p.a)({messagesRoot:{maxHeight:window.innerHeight-30},messages:{width:"100%",height:"70vh",backgroundColor:"#354765",overflowY:"auto"},newMessageRoot:{position:"relative",width:"100%",rowGap:20,color:"#ffffff"},sendButton:{backgroundColor:"#354765",color:"#ffffff",width:"20%",height:56,"&:hover":{backgroundColor:"#7094d2",color:"#354765"}},textField:{width:"80%"}}),A=n(108),_=n.n(A),U=n(5),L=Object(p.a)(Object(U.a)({mainBlock:{minWidth:"40vw",margin:10,borderRadius:"4%",maxWidth:"60%",width:"fit-content",padding:15,display:"grid",justifyContent:"flexStart",rowGap:20,fontFamily:"serif",position:"relative"},info:{color:"#afbed2",margin:"20px 30px"},name:{display:"block",maxWidth:"max-content"},copy:{cursor:"pointer",position:"absolute",opacity:.7,top:8},date:{fontSize:"0.7em"}},"@media (max-width:".concat(520,"px)"),{mainBlock:{minWidth:"70vw",fontSize:"1.4em"}})),G=n(14),B=n(45),F=n(46),J=n(19);!function(e){e.MESSAGE="message",e.QUIT="quit",e.CONNECTION="connection"}(g||(g={}));var D,V=function(){function e(){Object(B.a)(this,e),this.messages=[],this.messageValue="",this.isLoading=!1,this.isConnected=!1,this.connectionCounter=0,Object(J.d)(this,{},{deep:!0})}return Object(F.a)(e,[{key:"setConnected",value:function(e){this.isConnected=e}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setMessageValue",value:function(e){this.messageValue=e}},{key:"setMessages",value:function(e){this.messages=[].concat(Object(G.a)(this.messages),Object(G.a)(e))}},{key:"setConnectionCounter",value:function(e){this.connectionCounter=e}}]),e}(),W=Object(v.a)((function(e){var t,n=e.isMe,s=e.message,c=Object(r.useContext)(a),o=Object(j.a)(c,3),i=o[0],u=(o[1],o[2],L());s.event===g.CONNECTION&&i.setConnectionCounter(s.connectionCounter);var l={backgroundColor:n?"#3a64a8":"#536f9b",color:n?"#f6dbaa":"#eee4cc",marginLeft:n?"auto":"10%",marginRight:n?"10%":0,paddingRight:10};return Object(y.jsx)(m.a,{direction:"column",container:!0,children:s.event===g.MESSAGE?Object(y.jsxs)("div",{className:u.mainBlock,style:l,children:[Object(y.jsx)("h3",{className:u.name,style:{justifySelf:"".concat(!n&&"flex-end"),borderBottom:"2px solid ".concat(n?"#f6dbaa":"#eee4cc")},children:null===(t=s.name)||void 0===t?void 0:t.toUpperCase()}),Object(y.jsx)("span",{children:s.body}),Object(y.jsx)("span",{className:u.date,children:C(1e3*s.date)}),Object(y.jsx)("div",{onClick:function(){return navigator.clipboard.writeText(s.body)},style:n?{right:2}:{left:6},title:"\u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",className:u.copy,children:Object(y.jsx)(_.a,{})})]}):s.event===g.CONNECTION?Object(y.jsxs)("span",{className:u.info,children:[s.name," \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443.. ."]}):Object(y.jsxs)("span",{className:u.info,children:[s.name," \u0432\u044b\u0448\u0435\u043b \u0438\u0437 \u0447\u0430\u0442\u0430.. ."]})})})),H=n(109),z=n.n(H),P=n(89),q=n.n(P),K=n(110),Y=n.n(K),Q=Object(p.a)({emojiRoot:{position:"absolute",zIndex:1,top:10},picker:{top:-350}}),X=Object(v.a)((function(e){e.children;var t=e.frameWidth,n=void 0===t?0:t,s=Object(r.useContext)(a),c=Object(j.a)(s,3),o=c[0],i=(c[1],c[2],Q()),u=Object(r.useState)(!1),l=Object(j.a)(u,2),d=l[0],b=l[1];return Object(y.jsx)("div",{style:{right:"".concat(.2*n,"px")},className:z()(i.emojiRoot,Object(U.a)({},i.picker,d)),onBlur:function(){return b(!1)},children:d?Object(y.jsx)(q.a,{native:!0,groupNames:{smileys_people:"PEOPLE"},disableAutoFocus:!0,onEmojiClick:function(e,t){o.setMessageValue(t.emoji)},skinTone:P.SKIN_TONE_MEDIUM_DARK}):Object(y.jsx)(O.a,{onClick:function(){return b(!0)},children:Object(y.jsx)(Y.a,{})})})})),Z=n(73),$=Object(v.a)((function(e){var t,n=Object(r.useContext)(a),s=Object(j.a)(n,3),c=s[0],o=s[1],i=s[2],u=Object(r.useRef)(null),l=M(),d=Object(Z.a)({initialValues:{message:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},onSubmit:function(e){return function(){if(c.messageValue.trim()){var e={event:"message",id:Date.now().toString(),name:o.me.email,body:c.messageValue};null===i||void 0===i||i.send(JSON.stringify(e)),c.setMessageValue("")}}()}}),b=c.messages.length;return Object(r.useEffect)((function(){!function(){var e;null===(e=u.current)||void 0===e||e.scrollTo(0,u.current.scrollHeight)}()})),c.isLoading?Object(y.jsx)(E,{}):Object(y.jsx)(S.a,{children:Object(y.jsxs)("form",{onSubmit:d.handleSubmit,children:[Object(y.jsx)(m.a,{container:!0,className:l.messagesRoot,alignItems:"center",children:Object(y.jsx)(m.a,{ref:u,className:l.messages,children:b&&c.messages.map((function(e){var t=o.me.email===e.name;return Object(y.jsx)(W,{isMe:t,message:e},e.id)}))})}),Object(y.jsxs)(m.a,{className:l.newMessageRoot,container:!0,direction:"row",alignItems:"flex-end",children:[Object(y.jsx)(I.a,{id:"message",name:"message",label:"message",variant:"filled",autoComplete:"off",onChange:function(e){return c.setMessageValue(e.currentTarget.value)},value:c.messageValue,className:l.textField}),Object(y.jsx)(X,{frameWidth:null===(t=u.current)||void 0===t?void 0:t.clientWidth}),Object(y.jsx)(O.a,{type:"submit",variant:"outlined",classes:{outlined:l.sendButton},children:Object(y.jsx)("strong",{children:"send"})})]})]})})})),ee=n(40),te=n(218),ne=n(207),ae=n(210),re=Object(p.a)({root:{marginTop:"5%",position:"relative"},alert:{position:"absolute",width:300,right:"25%",opacity:.7,zIndex:1,top:"5%"}}),se=function(e){var t,n,s=e.onSubmit,c=e.children,o=e.submitButtonText,i=e.isRegistration,u=void 0!==i&&i,l=e.showAlert,d=void 0!==l&&l,b=e.onCloseAlert,f=Object(r.useContext)(a),p=Object(j.a)(f,3),h=(p[0],p[1],p[2],re()),g=Object(Z.a)({initialValues:{name:"",password:""},onSubmit:function(e){try{s&&s(e.name,e.password)}catch(t){console.log(t)}}}),v=""===(null===(t=g.values)||void 0===t?void 0:t.name)||g.values.name.trim().length<3||""===(null===(n=g.values)||void 0===n?void 0:n.password)||g.values.password.trim().length<3;return Object(y.jsxs)("form",{className:h.root,onSubmit:g.handleSubmit,children:[Object(y.jsxs)(te.a,{className:h.alert,children:[Object(y.jsx)(ne.a,{in:d,children:Object(y.jsx)(ae.a,{onClose:b,severity:"info",children:u?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 \u0447\u0430\u0442\u0435":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})}),Object(y.jsx)(ne.a,Object(ee.a)(Object(ee.a)({in:d,style:{transformOrigin:"0 0 0"}},d?{timeout:1e3}:{}),{},{children:Object(y.jsx)(ae.a,{severity:"info",children:u?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})}))]}),Object(y.jsxs)(m.a,{container:!0,justifyContent:"center",alignItems:"center",direction:"column",gap:1,children:[c,Object(y.jsx)(I.a,{autoFocus:!0,variant:"filled",onChange:g.handleChange,value:g.values.name,id:"name",name:"name",label:"name"}),Object(y.jsx)(I.a,{inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},variant:"filled",onChange:g.handleChange,value:g.values.password,type:"password",id:"password",name:"password",label:"password"}),Object(y.jsx)(O.a,{type:"submit",disabled:v,color:"info",variant:"contained",children:o})]})]})},ce={fontFamily:"monospace",fontSize:"2rem"},oe=Object(p.a)({title:Object(ee.a)(Object(ee.a)({},ce),{},{textTransform:"uppercase"})}),ie=n(113),ue=n.n(ie),le=Object(p.a)({children:{display:"grid",gridTemplateColumns:"1fr 24px",columnGap:6,cursor:"pointer"},title:Object(ee.a)(Object(ee.a)({},ce),{},{textTransform:"uppercase"})}),de=Object(p.a)({root:{marginTop:"10%"},button:{backgroundColor:"#354765"}});!function(e){e.LOGIN_ROUTE="/login",e.CHAT_ROUTE="/chat",e.REGISTRATION_ROUTE="/registration",e.JOIN_ROUTE="/join"}(D||(D={}));var je=[{path:D.JOIN_ROUTE,Component:function(){var e=de();return Object(y.jsxs)(m.a,{className:e.root,container:!0,justifyContent:"center",direction:"column",alignItems:"center",gap:10,children:[Object(y.jsx)(m.a,{item:!0,children:Object(y.jsx)(T.b,{to:D.REGISTRATION_ROUTE,children:Object(y.jsx)(O.a,{variant:"contained",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})}),Object(y.jsx)(m.a,{item:!0,children:Object(y.jsx)(T.b,{to:D.LOGIN_ROUTE,children:Object(y.jsx)(O.a,{variant:"contained",children:"\u0412\u0445\u043e\u0434"})})})]})}},{path:D.LOGIN_ROUTE,Component:function(){var e=oe(),t=Object(r.useContext)(a),n=Object(j.a)(t,3),s=(n[0],n[1]);n[2];return Object(y.jsx)(se,{onSubmit:function(e,t){s.login(e,t)},submitButtonText:"\u0412\u043e\u0439\u0442\u0438",children:Object(y.jsx)("div",{className:e.title,children:" \u0412\u0445\u043e\u0434 "})})}},{path:D.REGISTRATION_ROUTE,Component:function(){var e,t=le(),n=Object(r.useState)(!1),s=Object(j.a)(n,2),c=s[0],o=s[1],i=Object(r.useContext)(a),u=Object(j.a)(i,3),l=(u[0],u[1]),d=(u[2],Object(r.useCallback)((function(){o(!0),e=setTimeout((function(){o(!1)}),5e3)}),[])),b=Object(r.useCallback)((function(){o(!1),clearTimeout(e)}),[]);return Object(y.jsx)(se,{onCloseAlert:b,showAlert:c,isRegistration:!0,onSubmit:function(e,t){l.registration(e,t)},submitButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:Object(y.jsxs)("div",{className:t.children,onClick:c?b:d,children:[Object(y.jsx)("div",{className:t.title,children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "})," ",Object(y.jsx)(ue.a,{})]})})}}],be=(D.CHAT_ROUTE,Object(v.a)((function(e){var t=Object(r.useContext)(a),n=Object(j.a)(t,3),s=n[0],c=n[1],o=(n[2],s.connectionCounter),i=h(),u=!!c.me.email,l=Object(N.g)().pathname.includes(D.LOGIN_ROUTE);return Object(y.jsx)(b.a,{color:"transparent",variant:"outlined",elevation:0,position:"static",children:Object(y.jsxs)(f.a,{className:i.root,children:[Object(y.jsx)("div",{className:i.empty}),Object(y.jsxs)("div",{className:i.title,children:[Object(y.jsx)("strong",{children:"\u0427\u0430\u0442 \u0438\u043c\u0435\u043d\u0438 \u0410\u043b\u044c\u0444\u0440\u0435\u0434\u043e \u0413\u0430\u0440\u0441\u0438\u0438".toUpperCase()}),u?Object(y.jsxs)("span",{className:i.onlineCounter,children:[" \u0441\u0435\u0439\u0447\u0430\u0441 \u043e\u043d\u043b\u0430\u0439\u043d: ",o||0," \u0447\u0435\u043b\u043e\u0432\u0435\u043a "]}):l?Object(y.jsx)(m.a,{item:!0,children:Object(y.jsx)(T.b,{to:D.REGISTRATION_ROUTE,children:Object(y.jsx)(O.a,{variant:"text",children:"\u043a \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})})}):Object(y.jsx)(m.a,{item:!0,children:Object(y.jsx)(T.b,{to:D.LOGIN_ROUTE,children:Object(y.jsx)(O.a,{variant:"text",children:"\u043a \u043b\u043e\u0433\u0438\u043d\u0443"})})})]}),Object(y.jsx)(k,{}),Object(y.jsx)(m.a,{container:!0,children:u&&Object(y.jsx)(O.a,{onClick:function(){},variant:"outlined",children:"Logout"})})]})})}))),fe=(n(141),n(91)),me=n.n(fe),Oe="https://ws-simple-chat-api.herokuapp.com/auth",pe=me.a.create({baseURL:Oe});pe.interceptors.request.use((function(e){if(e&&e.headers)return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),pe.interceptors.response.use((function(e){return e}),function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||!t.config||t.config._isRetry){e.next=14;break}return n._isRetry=!0,e.prev=3,e.next=6,me.a.post("".concat(Oe,"/refresh"),{withCredentials:!0});case 6:return a=e.sent,localStorage.setItem("token",a.data.accessToken),e.abrupt("return",pe.request(n));case 11:e.prev=11,e.t0=e.catch(3),console.log("\u041d\u0415 \u0410\u0412\u0422\u041e\u0420\u0418\u0417\u041e\u0412\u0410\u041d");case 14:throw t;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());var he=pe,ge=function(){function e(){Object(B.a)(this,e)}return Object(F.a)(e,null,[{key:"login",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.post("/login",{email:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.post("/registration",{email:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.delete("/logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.post("/refresh"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ve=function(){function e(){Object(B.a)(this,e),this.me={},Object(J.d)(this,{},{deep:!0})}return Object(F.a)(e,[{key:"setMe",value:function(e){this.me=e}},{key:"setAuthData",value:function(e){localStorage.setItem("token",e.data.accessToken),this.setMe(e.data.user)}},{key:"login",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge.login(t,n);case 3:a=e.sent,this.setAuthData(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge.registration(t,n);case 3:a=e.sent,this.setAuthData(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge.refresh();case 3:t=e.sent,localStorage.setItem("token",t.data.accessToken),this.setMe(t.data.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xe=ve,we=function(){return Object(y.jsxs)(N.d,{children:[je.map((function(e){var t=e.path,n=e.Component;return Object(y.jsx)(N.b,{path:t,component:n,exact:!0},t)})),Object(y.jsx)(N.a,{to:D.JOIN_ROUTE})]})},Ce=Object(v.a)((function(e){var t=Object(r.useState)((function(){return new V})),n=Object(j.a)(t,1)[0],s=Object(r.useState)((function(){return new xe})),c=Object(j.a)(s,1)[0],o=Object(r.useState)(null),i=Object(j.a)(o,2),u=i[0],b=i[1],f=r.useMemo((function(){return[n,c,u]}),[n,c,u]),m=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setLoading(!0),e.t0=b,e.next=4,new WebSocket("wss://ws-simple-chat-api.herokuapp.com");case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=!!c.me.email;return Object(r.useEffect)((function(){localStorage.getItem("token")&&c.refresh()}),[]),Object(r.useEffect)((function(){u||m()}),[O]),u&&(u.onmessage=function(e){n.setMessages(JSON.parse(e.data))},u.onopen=function(){n.setConnected(!0);var e={event:g.CONNECTION,id:c.me.id,name:c.me.email,body:""};null===u||void 0===u||u.send(JSON.stringify(e)),n.setLoading(!1)},u.onmessage=function(e){var t=JSON.parse(e.data);n.setMessages(t)},u.onclose=function(){n.setConnected(!1);var e={event:g.CONNECTION,id:c.me.id,name:c.me.email,body:""};u.send(JSON.stringify(e))},u.onerror=function(){n.setConnected(!1),setTimeout((function(){return m()}),1e3)}),n.isLoading?Object(y.jsx)(E,{}):Object(y.jsx)(T.a,{children:Object(y.jsxs)(a.Provider,{value:f,children:[Object(y.jsx)(be,{}),O?Object(y.jsx)($,{}):Object(y.jsx)(we,{})]})})})),ye=Ce;o.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(ye,{})}),document.getElementById("root")),i()}},[[160,1,2]]]);
//# sourceMappingURL=main.641390c9.chunk.js.map